<main>
    <h1 class="titulo-pagina">Estudos Bíblicos</h1>
    
    <!-- Estudo da Semana -->
    <section id="estudo-semana">
        <h2 id="titulo-semana"></h2>
        <img id="capa-semana" src="" alt="Capa do estudo">
        <p id="texto-semana"></p>
        <iframe id="video-semana" width="560" height="315" src="" frameborder="0" allowfullscreen></iframe>
    </section>

    <h3>Últimos Estudos</h3>
    <div class="carrossel" id="ultimos-estudos">
        <!-- Estudos serão carregados aqui -->
    </div>

    <a href="todos-estudos.html" class="botao">Ver mais estudos</a>

    <script>
        async function carregarEstudoSemana() {
            try {
                const response = await fetch("estudos.json");
                const estudos = await response.json();
                if (estudos.length > 0) {
                    const estudoSemana = estudos[estudos.length - 1]; // Último estudo

                    document.getElementById("titulo-semana").innerText = estudoSemana.titulo;
                    document.getElementById("capa-semana").src = estudoSemana.imagem;
                    document.getElementById("texto-semana").innerHTML = estudoSemana.textoCompleto;
                    document.getElementById("video-semana").src = estudoSemana.video;
                }

                // Carregar os três últimos estudos
                const ultimosEstudosContainer = document.getElementById("ultimos-estudos");
                estudos.slice(-4, -1).reverse().forEach(estudo => {
                    const divEstudo = document.createElement("div");
                    divEstudo.classList.add("estudo-carrossel");
                    divEstudo.innerHTML = `
                        <img src="${estudo.imagem}" alt="Imagem do estudo">
                        <h3>${estudo.titulo}</h3>
                        <p>${estudo.resumo}</p>
                        <a href="estudo-detalhe.html?id=${estudo.id}" class="botao">Leia mais</a>
                    `;
                    ultimosEstudosContainer.appendChild(divEstudo);
                });

            } catch (error) {
                console.error("Erro ao carregar o estudo da semana:", error);
            }
        }

        carregarEstudoSemana();
    </script>

</main>
